<HTML>
<HEAD>
<meta charset="UTF-8">
<title>EThree - ethree-kotlin-coroutines</title>
<link rel="stylesheet" href="../../../style.css">
</HEAD>
<BODY>
<a href="../../index.html">ethree-kotlin-coroutines</a>&nbsp;/&nbsp;<a href="../index.html">com.virgilsecurity.android.ethreecoroutines.interaction</a>&nbsp;/&nbsp;<a href="./index.html">EThree</a><br/>
<br/>
<h1>EThree</h1>
<code><span class="keyword">class </span><span class="identifier">EThree</span></code>
<p><a href="./index.html">EThree</a> class simplifies work with Virgil Services to easily implement End to End Encrypted
communication.</p>
<h3>Functions</h3>
<table>
<tbody>
<tr>
<td>
<p><a href="backup-private-key.html">backupPrivateKey</a></p>
</td>
<td>
<code><span class="keyword">fun </span><span class="identifier">backupPrivateKey</span><span class="symbol">(</span><span class="identifier" id="com.virgilsecurity.android.ethreecoroutines.interaction.EThree$backupPrivateKey(kotlin.String)/password">password</span><span class="symbol">:</span>&nbsp;<a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-string/index.html"><span class="identifier">String</span></a><span class="symbol">)</span><span class="symbol">: </span><span class="identifier">Deferred</span><span class="symbol">&lt;</span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-unit/index.html"><span class="identifier">Unit</span></a><span class="symbol">&gt;</span></code>
<p>Encrypts the user's private key using the user's <a href="backup-private-key.html#com.virgilsecurity.android.ethreecoroutines.interaction.EThree$backupPrivateKey(kotlin.String)/password">password</a> and backs up the encrypted
private key to Virgil's cloud. This enables users to log in from other devices and have
access to their private key to decrypt data.</p>
</td>
</tr>
<tr>
<td>
<p><a href="change-password.html">changePassword</a></p>
</td>
<td>
<code><span class="keyword">fun </span><span class="identifier">changePassword</span><span class="symbol">(</span><span class="identifier" id="com.virgilsecurity.android.ethreecoroutines.interaction.EThree$changePassword(kotlin.String, kotlin.String)/oldPassword">oldPassword</span><span class="symbol">:</span>&nbsp;<a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-string/index.html"><span class="identifier">String</span></a><span class="symbol">, </span><span class="identifier" id="com.virgilsecurity.android.ethreecoroutines.interaction.EThree$changePassword(kotlin.String, kotlin.String)/newPassword">newPassword</span><span class="symbol">:</span>&nbsp;<a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-string/index.html"><span class="identifier">String</span></a><span class="symbol">)</span><span class="symbol">: </span><span class="identifier">Deferred</span><span class="symbol">&lt;</span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-unit/index.html"><span class="identifier">Unit</span></a><span class="symbol">&gt;</span></code>
<p>Changes the password of the private key backup.</p>
</td>
</tr>
<tr>
<td>
<p><a href="cleanup.html">cleanup</a></p>
</td>
<td>
<code><span class="keyword">fun </span><span class="identifier">cleanup</span><span class="symbol">(</span><span class="symbol">)</span><span class="symbol">: </span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-unit/index.html"><span class="identifier">Unit</span></a></code>
<p>! <em>WARNING</em> ! If you call this function after <a href="register.html">register</a> without using <a href="backup-private-key.html">backupPrivateKey</a>
then you loose private key permanently, as well you won't be able to use identity that
was used with that private key no more.</p>
</td>
</tr>
<tr>
<td>
<p><a href="decrypt.html">decrypt</a></p>
</td>
<td>
<code><span class="keyword">fun </span><span class="identifier">decrypt</span><span class="symbol">(</span><span class="identifier" id="com.virgilsecurity.android.ethreecoroutines.interaction.EThree$decrypt(kotlin.String, com.virgilsecurity.sdk.crypto.PublicKey)/base64String">base64String</span><span class="symbol">:</span>&nbsp;<a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-string/index.html"><span class="identifier">String</span></a><span class="symbol">, </span><span class="identifier" id="com.virgilsecurity.android.ethreecoroutines.interaction.EThree$decrypt(kotlin.String, com.virgilsecurity.sdk.crypto.PublicKey)/sendersKey">sendersKey</span><span class="symbol">:</span>&nbsp;<span class="identifier">PublicKey</span><span class="symbol">?</span>&nbsp;<span class="symbol">=</span>&nbsp;null<span class="symbol">)</span><span class="symbol">: </span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-string/index.html"><span class="identifier">String</span></a></code>
<p>Decrypts encrypted text that is in base64 <a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-string/index.html">String</a> format.</p>
<code><span class="keyword">fun </span><span class="identifier">decrypt</span><span class="symbol">(</span><span class="identifier" id="com.virgilsecurity.android.ethreecoroutines.interaction.EThree$decrypt(kotlin.ByteArray, com.virgilsecurity.sdk.crypto.PublicKey)/data">data</span><span class="symbol">:</span>&nbsp;<a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-byte-array/index.html"><span class="identifier">ByteArray</span></a><span class="symbol">, </span><span class="identifier" id="com.virgilsecurity.android.ethreecoroutines.interaction.EThree$decrypt(kotlin.ByteArray, com.virgilsecurity.sdk.crypto.PublicKey)/sendersKey">sendersKey</span><span class="symbol">:</span>&nbsp;<span class="identifier">PublicKey</span><span class="symbol">?</span>&nbsp;<span class="symbol">=</span>&nbsp;null<span class="symbol">)</span><span class="symbol">: </span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-byte-array/index.html"><span class="identifier">ByteArray</span></a></code>
<p>Decrypts encrypted data.</p>
</td>
</tr>
<tr>
<td>
<p><a href="encrypt.html">encrypt</a></p>
</td>
<td>
<code><span class="keyword">fun </span><span class="identifier">encrypt</span><span class="symbol">(</span><span class="identifier" id="com.virgilsecurity.android.ethreecoroutines.interaction.EThree$encrypt(kotlin.String, kotlin.collections.List((com.virgilsecurity.sdk.crypto.PublicKey)))/text">text</span><span class="symbol">:</span>&nbsp;<a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-string/index.html"><span class="identifier">String</span></a><span class="symbol">, </span><span class="identifier" id="com.virgilsecurity.android.ethreecoroutines.interaction.EThree$encrypt(kotlin.String, kotlin.collections.List((com.virgilsecurity.sdk.crypto.PublicKey)))/publicKeys">publicKeys</span><span class="symbol">:</span>&nbsp;<a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/-list/index.html"><span class="identifier">List</span></a><span class="symbol">&lt;</span><span class="identifier">PublicKey</span><span class="symbol">&gt;</span><span class="symbol">?</span>&nbsp;<span class="symbol">=</span>&nbsp;null<span class="symbol">)</span><span class="symbol">: </span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-string/index.html"><span class="identifier">String</span></a></code>
<p>Encrypts text messages for a group of users.</p>
<code><span class="keyword">fun </span><span class="identifier">encrypt</span><span class="symbol">(</span><span class="identifier" id="com.virgilsecurity.android.ethreecoroutines.interaction.EThree$encrypt(kotlin.ByteArray, kotlin.collections.List((com.virgilsecurity.sdk.crypto.PublicKey)))/data">data</span><span class="symbol">:</span>&nbsp;<a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-byte-array/index.html"><span class="identifier">ByteArray</span></a><span class="symbol">, </span><span class="identifier" id="com.virgilsecurity.android.ethreecoroutines.interaction.EThree$encrypt(kotlin.ByteArray, kotlin.collections.List((com.virgilsecurity.sdk.crypto.PublicKey)))/publicKeys">publicKeys</span><span class="symbol">:</span>&nbsp;<a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/-list/index.html"><span class="identifier">List</span></a><span class="symbol">&lt;</span><span class="identifier">PublicKey</span><span class="symbol">&gt;</span><span class="symbol">?</span>&nbsp;<span class="symbol">=</span>&nbsp;null<span class="symbol">)</span><span class="symbol">: </span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-byte-array/index.html"><span class="identifier">ByteArray</span></a></code>
<p>Encrypts messages/other data for a group of users.</p>
</td>
</tr>
<tr>
<td>
<p><a href="has-local-private-key.html">hasLocalPrivateKey</a></p>
</td>
<td>
<code><span class="keyword">fun </span><span class="identifier">hasLocalPrivateKey</span><span class="symbol">(</span><span class="symbol">)</span><span class="symbol">: </span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-boolean/index.html"><span class="identifier">Boolean</span></a></code>
<p>Checks whether the private key is present in the local storage of current device.
Returns <em>true</em> if the key is present in the local key storage otherwise <em>false</em>.</p>
</td>
</tr>
<tr>
<td>
<p><a href="lookup-public-keys.html">lookupPublicKeys</a></p>
</td>
<td>
<code><span class="keyword">fun </span><span class="identifier">lookupPublicKeys</span><span class="symbol">(</span><span class="identifier" id="com.virgilsecurity.android.ethreecoroutines.interaction.EThree$lookupPublicKeys(kotlin.collections.List((kotlin.String)))/identities">identities</span><span class="symbol">:</span>&nbsp;<a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/-list/index.html"><span class="identifier">List</span></a><span class="symbol">&lt;</span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-string/index.html"><span class="identifier">String</span></a><span class="symbol">&gt;</span><span class="symbol">)</span><span class="symbol">: </span><span class="identifier">Deferred</span><span class="symbol">&lt;</span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/-map/index.html"><span class="identifier">Map</span></a><span class="symbol">&lt;</span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-string/index.html"><span class="identifier">String</span></a><span class="symbol">,</span>&nbsp;<span class="identifier">PublicKey</span><span class="symbol">&gt;</span><span class="symbol">&gt;</span></code>
<p>Retrieves user public keys from the cloud for encryption/verification operations.</p>
</td>
</tr>
<tr>
<td>
<p><a href="register.html">register</a></p>
</td>
<td>
<code><span class="keyword">fun </span><span class="identifier">register</span><span class="symbol">(</span><span class="symbol">)</span><span class="symbol">: </span><span class="identifier">Deferred</span><span class="symbol">&lt;</span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-unit/index.html"><span class="identifier">Unit</span></a><span class="symbol">&gt;</span></code>
<p>Publishes the public key in Virgil's Cards Service in case no public key for current
identity is published yet. Otherwise <a href="#">RegistrationException</a> will be thrown.</p>
</td>
</tr>
<tr>
<td>
<p><a href="reset-private-key-backup.html">resetPrivateKeyBackup</a></p>
</td>
<td>
<code><span class="keyword">fun </span><span class="identifier">resetPrivateKeyBackup</span><span class="symbol">(</span><span class="identifier" id="com.virgilsecurity.android.ethreecoroutines.interaction.EThree$resetPrivateKeyBackup(kotlin.String)/password">password</span><span class="symbol">:</span>&nbsp;<a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-string/index.html"><span class="identifier">String</span></a><span class="symbol">?</span>&nbsp;<span class="symbol">=</span>&nbsp;null<span class="symbol">)</span><span class="symbol">: </span><span class="identifier">Deferred</span><span class="symbol">&lt;</span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-unit/index.html"><span class="identifier">Unit</span></a><span class="symbol">&gt;</span></code>
<p>Deletes the user's private key from Virgil's cloud.</p>
</td>
</tr>
<tr>
<td>
<p><a href="restore-private-key.html">restorePrivateKey</a></p>
</td>
<td>
<code><span class="keyword">fun </span><span class="identifier">restorePrivateKey</span><span class="symbol">(</span><span class="identifier" id="com.virgilsecurity.android.ethreecoroutines.interaction.EThree$restorePrivateKey(kotlin.String)/password">password</span><span class="symbol">:</span>&nbsp;<a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-string/index.html"><span class="identifier">String</span></a><span class="symbol">)</span><span class="symbol">: </span><span class="identifier">Deferred</span><span class="symbol">&lt;</span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-unit/index.html"><span class="identifier">Unit</span></a><span class="symbol">&gt;</span></code>
<p>Pulls user's private key from the Virgil's cloud, decrypts it with <em>Private key</em> that
is generated based on provided <a href="restore-private-key.html#com.virgilsecurity.android.ethreecoroutines.interaction.EThree$restorePrivateKey(kotlin.String)/password">password</a> and saves it to the current private keys
local storage.</p>
</td>
</tr>
<tr>
<td>
<p><a href="rotate-private-key.html">rotatePrivateKey</a></p>
</td>
<td>
<code><span class="keyword">fun </span><span class="identifier">rotatePrivateKey</span><span class="symbol">(</span><span class="symbol">)</span><span class="symbol">: </span><span class="identifier">Deferred</span><span class="symbol">&lt;</span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-unit/index.html"><span class="identifier">Unit</span></a><span class="symbol">&gt;</span></code>
<p>Generates new key pair, publishes new public key for current identity and deprecating old
public key, saves private key to the local storage. All data that was encrypted earlier
will become undecryptable.</p>
</td>
</tr>
</tbody>
</table>
<h3>Companion Object Functions</h3>
<table>
<tbody>
<tr>
<td>
<p><a href="initialize.html">initialize</a></p>
</td>
<td>
<code><span class="keyword">fun </span><span class="identifier">initialize</span><span class="symbol">(</span><span class="identifier" id="com.virgilsecurity.android.ethreecoroutines.interaction.EThree.Companion$initialize(android.content.Context, kotlin.Function0((kotlin.String)))/context">context</span><span class="symbol">:</span>&nbsp;<span class="identifier">Context</span><span class="symbol">, </span><span class="identifier" id="com.virgilsecurity.android.ethreecoroutines.interaction.EThree.Companion$initialize(android.content.Context, kotlin.Function0((kotlin.String)))/onGetToken">onGetToken</span><span class="symbol">:</span>&nbsp;<span class="symbol">(</span><span class="symbol">)</span>&nbsp;<span class="symbol">-&gt;</span>&nbsp;<a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-string/index.html"><span class="identifier">String</span></a><span class="symbol">)</span><span class="symbol">: </span><span class="identifier">Deferred</span><span class="symbol">&lt;</span><a href="./index.html"><span class="identifier">EThree</span></a><span class="symbol">&gt;</span></code>
<p>Current method allows you to initialize EThree helper class. To do this you should
provide <a href="initialize.html#com.virgilsecurity.android.ethreecoroutines.interaction.EThree.Companion$initialize(android.content.Context, kotlin.Function0((kotlin.String)))/onGetToken">onGetToken</a> function that must return Json Web Token string representation
with identity of the user which will use this class. You will receive instance of
<a href="./index.html">EThree</a> class or an <a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-throwable/index.html">Throwable</a> if something went wrong.</p>
</td>
</tr>
</tbody>
</table>
</BODY>
</HTML>
